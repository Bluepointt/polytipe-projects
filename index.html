<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
  <meta charset="utf-8">

  <title>project_name | Polytipe</title>
  <meta name="description" content="">

  <!-- No zooming! -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <!-- Chrome / Android -->
  <meta id="bar" name="theme-color" content="#212121">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#212121">
  <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">
  <link rel="icon" sizes="72x72" href="images/touch/icon-72x72.png">

  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Tile color for Win8/10 -->
  <meta name="msapplication-TileColor" content="">
  <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="My App">
  <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

  <!-- Twitter card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@alejost848">
	<meta name="twitter:creator" content="@alejost848">
	<meta name="twitter:title" content="Polytipe">
	<meta name="twitter:description" content="Este es un prototipo creado por usuario utilizando Polytipe. Conoce más en polytipe.me">
	<meta name="twitter:image" content="http://polytipe.github.io/polytipe/images/cover.png">

  <!-- Facebook card -->
	<meta property="og:title" content="Polytipe">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://usuario.github.io/polytipe-projects">
	<meta property="og:description" content="Este es un prototipo creado por usuario utilizando Polytipe. Conoce más en polytipe.me">
	<meta property="og:image" content="http://polytipe.github.io/polytipe/images/cover.png">

  <!-- Web Components -->
  <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="elements.html">
  <link rel="import" href="styles.html">
  <link rel="import" href="iron-flex.html">

</head>

<body class="fullbleed main">
  <template id="app" is="dom-bind">
    <iron-location path="{{path}}" hash="{{hash}}" query="{{query}}"></iron-location>
    <paper-drawer-panel id="drawer_panel" disable-swipe force-narrow>
      <paper-header-panel drawer mode="seamed">
        <div id="drawer_content"></div>
      </paper-header-panel>
      <paper-header-panel main mode="seamed">
        <paper-toolbar id="editor_toolbar" class="screen_view_toolbar">
          <div>
            <a class="link" tabindex="-1" href="https://polytipe.me" target="_blank">
              <paper-icon-button class="back_icon" icon="polytipe-icons:icon"></paper-icon-button>
            </a>
            <paper-tooltip offset="0" animation-delay="0">Ir a Polytipe</paper-tooltip>
          </div>
          <div class="paper-font-title">Prototipo project_name</div>
          <span class="flex"></span>
          <div>
            <a class="link" tabindex="-1" href="https://github.com/{{username}}/polytipe-projects/tree/project_name" target="_blank">
              <paper-icon-button icon="polytipe-icons:github"></paper-icon-button>
            </a>
            <paper-tooltip offset="0" animation-delay="0">Ver en Github</paper-tooltip>
          </div>
          <div>
            <a class="link" tabindex="-1" href="https://github.com/{{username}}/polytipe-projects/issues" target="_blank">
              <paper-icon-button icon="feedback"></paper-icon-button>
            </a>
            <paper-tooltip offset="0" animation-delay="0">Enviar feedback</paper-tooltip>
          </div>
        </paper-toolbar>

        <div id="app_container" class="layout vertical center-center">
          <paper-spinner id="iframe_loading_spinner" active></paper-spinner>
          <iframe id="app_iframe" src="prototype.html"></iframe>
          <paper-chip id="user_badge" animated>
            <iron-image class="icon" id="avatar" src="avatar_url" preload fade></iron-image>
            <h1>{{username}}</h1>
            <h2>Creado con Polytipe</h2>
          </paper-chip>
        </div>
      </paper-header-panel>
    </paper-drawer-panel>
  </template>
  <script type="text/javascript">
    //Preloader
    var style = document.createElement("style");
    style.textContent = "" + "body {" + "background-color: #303030; margin: 0 auto; width: 100vw; height: 100vh;" + " } \n" + "#pre_loader{" + "margin: 0 auto; width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; transition: opacity ease-in 0.2s;" + " }";
    var head = document.querySelector("head");
    head.insertBefore(style, head.firstChild);

    var pre_loader = document.createElement("div");
    pre_loader.id = "pre_loader";
    var loading_icon = document.createElement("div");
    loading_icon.innerHTML = "<img src='images/touch/preloader.png'>";
    pre_loader.appendChild(loading_icon);
    document.body.appendChild(pre_loader);

    window.addEventListener('WebComponentsReady', function(e) {
      document.getElementById('drawer_panel').style.opacity = 1;
      pre_loader.style.display = "none";
      var app = document.getElementById("app");
      app.username = location.host.split(".")[0];
    });
    function iframe_ready() {
      document.getElementById('app_iframe').style.opacity = 1;
      document.getElementById('iframe_loading_spinner').active = false;

      var iframe_document = document.getElementById('app_iframe').contentDocument || document.getElementById('app_iframe').contentWindow.document;
      var app_content = iframe_document.getElementById('app_content');
      if(app_content.children.length > 0){
        app_content.selected = app_content.children[0].id;
      }
    }
  </script>
</body>

</html>
